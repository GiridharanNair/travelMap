{"version":3,"sources":["travelmap.js"],"names":["_travelMap","_defaultOptions","stops","currentStop","selector","iconUrl","initialZoom","pastStroke","color","opacity","weight","futureStroke","createMap","options","map","settings","_extend","length","pastLines","slice","futureLines","currentLocation","_initStyle","window","GMaps","console","log","div","lat","lng","zoom","setOptions","draggable","scrollwheel","disableDoubleClickZoom","zoomControl","drawPolyline","path","_toLatLongCollection","strokeColor","strokeOpacity","strokeWeight","i","stop","addMarker","icon","infoWindow","content","info","anchorPoint","x","y","drawOverlay","verticalAlign","horizontalAlign","layer","_toLatLong","collection","push","stopStyle","style","document","createElement","innerHTML","head","appendChild","base","defaults","extended","key","hasOwnProperty","undefined","exports","module","travelMap","this","define","amd","call"],"mappings":";;;;CAMC,WAEC,YAGA,IAAIA,MAEAC,GACFC,SACAC,YAAa,EACbC,SAAU,OACVC,QAAS,yBACTC,YAAa,EACbC,YACEC,MAAO,UACPC,QAAS,GACTC,OAAQ,GAEVC,cACEH,MAAO,UACPC,QAAS,GACTC,OAAQ,GAKZV,GAAWY,UAAY,SAAUC,GAE/B,GAAIC,GACAC,EAAWC,EAAQH,EAASZ,EAEhC,KAAKc,EAASb,OAAkC,GAAzBa,EAASb,MAAMe,OACpC,KAAM,4CAIR,IAAIC,GAAYH,EAASb,MAAMiB,MAAM,EAAGJ,EAASZ,YAAc,GAC3DiB,EAAcL,EAASb,MAAMiB,MAAMJ,EAASZ,YAAaY,EAASb,MAAMe,QACxEI,EAAkBN,EAASb,MAAMa,EAASZ,YAE9CmB,KAG8B,kBAAjBC,QAAOC,OAAwBD,OAAOC,OACjDC,QAAQC,IAAI,8IAGdZ,EAAM,GAAIU,QACRG,IAAKZ,EAASX,SACdwB,IAAKP,EAAgBO,IACrBC,IAAKR,EAAAA,QACLS,KAAMf,EAAST,cAGjBQ,EAAIA,IAAIiB,YACNC,WAAW,EACXC,aAAa,EACbC,wBAAwB,EACxBC,aAAa,IAIfrB,EAAIsB,cACFC,KAAMC,EAAqBpB,GAC3BqB,YAAaxB,EAASR,WAAWC,MACjCgC,cAAezB,EAASR,WAAWE,QACnCgC,aAAc1B,EAASR,WAAWG,SAIpCI,EAAIsB,cACFC,KAAMC,EAAqBlB,GAC3BmB,YAAaxB,EAASJ,aAAaH,MACnCgC,cAAezB,EAASJ,aAAaF,QACrCgC,aAAc1B,EAASJ,aAAaD,QAGtC,KAAK,GAAIgC,GAAI,EAAGA,EAAI3B,EAASb,MAAMe,SAAUyB,EAAG,CAC9C,GAAIC,GAAO5B,EAASb,MAAMwC,EACtBA,IAAK3B,EAASZ,aAChBW,EAAI8B,WACFhB,IAAKe,EAAKf,IACVC,IAAKc,EAAAA,QACLE,KAAM9B,EAASV,QACfyC,YAAcC,QAASJ,EAAKK,MAC5BC,aAAeC,EAAG,EAAGC,EAAG,KAc9B,MATArC,GAAIsC,aACFxB,IAAKP,EAAgBO,IACrBC,IAAKR,EAAAA,QACL0B,QAAS,6CAA+C1B,EAAgB2B,KAAO,gDAC/EK,cAAe,MACfC,gBAAiB,SACjBC,MAAO,kBAIPzC,IAAKA,EACLC,SAAUA,EACVM,gBAAiBA,GAIrB,IAAImC,GAAa,SAAUb,GACzB,OAASA,EAAKf,IAAKe,EAAAA,UAGjBL,EAAuB,SAAUpC,GAEnC,IAAK,GADDuD,MACKP,EAAI,EAAGA,EAAIhD,EAAMe,SAAUiC,EAClCO,EAAWC,KAAKF,EAAWtD,EAAMgD,IAGnC,OAAOO,IAGLnC,EAAa,WAEf,GAAIqC,GAAY,8HAGZC,EAAQC,SAASC,cAAc,QACnCF,GAAMG,UAAYJ,EAClBE,SAASG,KAAKC,YAAYL,IAGxB5C,EAAU,SAAUkD,EAAMC,GAE5B,GAAIC,GAAWD,CAGf,KAAK,GAAIE,KAAOH,GACVA,EAAKI,eAAeD,IACJE,SAAdL,EAAKG,KACPD,EAASC,GAAOH,EAAKG,GAK3B,OAAOD,GAKc,oBAAZI,UACa,mBAAXC,SAA0BA,OAAOD,UAC1CA,QAAUC,OAAOD,QAAUxE,GAE7BwE,QAAQE,UAAY1E,GAEpB2E,KAAKD,UAAY1E,EAIG,kBAAX4E,SAAyBA,OAAOC,KACzCD,OAAO,eAAiB,WACtB,MAAO5E,OAIX8E,KAAKH","file":"travelmap.js","sourcesContent":["//! travelmap.js\r\n//! version : 0.01.0\r\n//! authors : Shawn Wildermuth\r\n//! license : MIT\r\n\r\n// Build support for AMD or simple global (borrowed pattern from moment.js)\r\n(function () {\r\n\r\n  \"use strict\";\r\n\r\n  // travelMap object\r\n  var _travelMap = {};\r\n\r\n  var _defaultOptions = {\r\n    stops: [],\r\n    currentStop: 0,\r\n    selector: \"#map\",\r\n    iconUrl: \"http://wildermuth.com/\",\r\n    initialZoom: 4,\r\n    pastStroke: {\r\n      color: '#190300',\r\n      opacity: 0.5,\r\n      weight: 2\r\n    },\r\n    futureStroke: {\r\n      color: '#D30000',\r\n      opacity: 0.6,\r\n      weight: 2\r\n    }\r\n  };\r\n\r\n\r\n  _travelMap.createMap = function (options) {\r\n\r\n    var map;\r\n    var settings = _extend(options, _defaultOptions);\r\n\r\n    if (!settings.stops || settings.stops.length == 0) {\r\n      throw \"You must supply stops when creating a map.\";\r\n    }\r\n\r\n    // calculate past, future and current stops\r\n    var pastLines = settings.stops.slice(0, settings.currentStop + 1);\r\n    var futureLines = settings.stops.slice(settings.currentStop, settings.stops.length);\r\n    var currentLocation = settings.stops[settings.currentStop];\r\n\r\n    _initStyle();\r\n\r\n    // Require GMaps and Google Maps API\r\n    if (!(typeof window.GMaps === 'function' && window.GMaps)) {\r\n      console.log('GMaps (and Google Maps API) is required. Please register the following JavaScript library https://hpneo.github.io/gmaps/documentation.html');\r\n    }\r\n\r\n    map = new GMaps({\r\n      div: settings.selector,\r\n      lat: currentLocation.lat,\r\n      lng: currentLocation.long,\r\n      zoom: settings.initialZoom\r\n    });\r\n\r\n    map.map.setOptions({\r\n      draggable: true,\r\n      scrollwheel: false,\r\n      disableDoubleClickZoom: true,\r\n      zoomControl: true\r\n    });\r\n\r\n    // Past Lines\r\n    map.drawPolyline({\r\n      path: _toLatLongCollection(pastLines),\r\n      strokeColor: settings.pastStroke.color,\r\n      strokeOpacity: settings.pastStroke.opacity,\r\n      strokeWeight: settings.pastStroke.weight\r\n    });\r\n\r\n    // Future Lines\r\n    map.drawPolyline({\r\n      path: _toLatLongCollection(futureLines),\r\n      strokeColor: settings.futureStroke.color,\r\n      strokeOpacity: settings.futureStroke.opacity,\r\n      strokeWeight: settings.futureStroke.weight\r\n    });\r\n\r\n    for (var i = 0; i < settings.stops.length; ++i) {\r\n      var stop = settings.stops[i];\r\n      if (i != settings.currentStop) {\r\n        map.addMarker({\r\n          lat: stop.lat,\r\n          lng: stop.long,\r\n          icon: settings.iconUrl,\r\n          infoWindow: { content: stop.info },\r\n          anchorPoint: { x: 3, y: 3 }\r\n        });\r\n      }\r\n    }\r\n\r\n    map.drawOverlay({\r\n      lat: currentLocation.lat,\r\n      lng: currentLocation.long,\r\n      content: '<div class=\"overlay\">Current Location<br/>' + currentLocation.info + '<div class=\"overlay_arrow above\"></div></div>',\r\n      verticalAlign: 'top',\r\n      horizontalAlign: 'center',\r\n      layer: \"overlayImage\"\r\n    });\r\n\r\n    return {\r\n      map: map,\r\n      settings: settings,\r\n      currentLocation: currentLocation\r\n    };\r\n  };\r\n\r\n  var _toLatLong = function (stop) {\r\n    return [ stop.lat, stop.long ];\r\n  };\r\n\r\n  var _toLatLongCollection = function (stops) {\r\n    var collection = [];\r\n    for (var x = 0; x < stops.length; ++x) {\r\n      collection.push(_toLatLong(stops[x]));\r\n    }\r\n    \r\n    return collection;\r\n  };\r\n\r\n  var _initStyle = function () {\r\n\r\n    var stopStyle = \".stopName { background: none repeat scroll 0 0 #222; width: 4px; height: 4px; }\" +\r\n      \".gm-style-iw{ overflow: hidden !important; }\";\r\n\r\n    var style = document.createElement(\"style\");\r\n    style.innerHTML = stopStyle;\r\n    document.head.appendChild(style);\r\n  };\r\n\r\n  var _extend = function (base, defaults) {\r\n\r\n    var extended = defaults;\r\n    \r\n    // Extend options with defaults\r\n    for (var key in base) {\r\n      if (base.hasOwnProperty(key)) {\r\n        if (base[key] !== undefined) {\r\n          extended[key] = base[key];\r\n        }\r\n      }\r\n    }\r\n\r\n    return extended;\r\n\r\n  };\r\n\r\n  // Expose it as a public\r\n  if (typeof exports !== 'undefined') {\r\n    if (typeof module !== 'undefined' && module.exports) {\r\n      exports = module.exports = _travelMap;\r\n    }\r\n    exports.travelMap = _travelMap;\r\n  } else {\r\n    this.travelMap = _travelMap;\r\n  }\r\n\r\n  // AMD registration  \r\n  if (typeof define === 'function' && define.amd) {\r\n    define('travelMap', [], function () {\r\n      return _travelMap;\r\n    });\r\n  }\r\n\r\n}.call(this));"],"sourceRoot":"/source/"}