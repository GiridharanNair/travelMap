{"version":3,"sources":["travelmap.js"],"names":["_travelMap","_defaultOptions","stops","currentStop","selector","icon","url","width","height","initialZoom","pastStroke","color","opacity","weight","futureStroke","mapOptions","draggable","scrollwheel","disableDoubleClickZoom","zoomControl","createMap","options","map","settings","_extend","length","pastLines","slice","futureLines","currentLocation","_initStyle","window","GMaps","console","log","div","lat","lng","zoom","setOptions","drawPolyline","path","_toLatLongCollection","strokeColor","strokeOpacity","strokeWeight","i","stop","addMarker","infoWindow","content","info","anchorPoint","x","y","drawOverlay","verticalAlign","horizontalAlign","layer","_toLatLong","collection","push","stopStyle","style","document","createElement","innerHTML","head","appendChild","base","defaults","extended","key","hasOwnProperty","undefined","exports","module","travelMap","this","define","amd","call"],"mappings":";;;;CAMC,WAEC,YAGA,IAAIA,MAEAC,GACFC,SACAC,YAAa,EACbC,SAAU,OACVC,MACEC,IAAK,6OACLC,MAAO,EACPC,OAAQ,GAEVC,YAAa,EACbC,YACEC,MAAO,UACPC,QAAS,GACTC,OAAQ,GAEVC,cACEH,MAAO,UACPC,QAAS,GACTC,OAAQ,GAEVE,YACEC,WAAW,EACXC,aAAa,EACbC,wBAAwB,EACxBC,aAAa,GAKjBnB,GAAWoB,UAAY,SAAUC,GAE/B,GAAIC,GACAC,EAAWC,EAAQH,EAASpB,EAEhC,KAAKsB,EAASrB,OAAkC,GAAzBqB,EAASrB,MAAMuB,OACpC,KAAM,4CAIR,IAAIC,GAAYH,EAASrB,MAAMyB,MAAM,EAAGJ,EAASpB,YAAc,GAC3DyB,EAAcL,EAASrB,MAAMyB,MAAMJ,EAASpB,YAAaoB,EAASrB,MAAMuB,QACxEI,EAAkBN,EAASrB,MAAMqB,EAASpB,YAE9C2B,KAG8B,kBAAjBC,QAAOC,OAAwBD,OAAOC,OACjDC,QAAQC,IAAI,8IAGdZ,EAAM,GAAIU,QACRG,IAAKZ,EAASnB,SACdgC,IAAKP,EAAgBO,IACrBC,IAAKR,EAAAA,QACLS,KAAMf,EAASd,cAGjBa,EAAIA,IAAIiB,WAAWhB,EAASR,YAG5BO,EAAIkB,cACFC,KAAMC,EAAqBhB,GAC3BiB,YAAapB,EAASb,WAAWC,MACjCiC,cAAerB,EAASb,WAAWE,QACnCiC,aAActB,EAASb,WAAWG,SAIpCS,EAAIkB,cACFC,KAAMC,EAAqBd,GAC3Be,YAAapB,EAAST,aAAaH,MACnCiC,cAAerB,EAAST,aAAaF,QACrCiC,aAActB,EAAST,aAAaD,QAGtC,KAAK,GAAIiC,GAAI,EAAGA,EAAIvB,EAASrB,MAAMuB,SAAUqB,EAAG,CAC9C,GAAIC,GAAOxB,EAASrB,MAAM4C,EACtBA,IAAKvB,EAASpB,aAChBmB,EAAI0B,WACFZ,IAAKW,EAAKX,IACVC,IAAKU,EAAAA,QACL1C,KAAMkB,EAASlB,KAAKC,IACpB2C,YAAcC,QAASH,EAAKI,MAC5BC,aAAeC,EAAG9B,EAASlB,KAAKE,MAAM,EAAG+C,EAAG/B,EAASlB,KAAKG,OAAO,KAcvE,MATAc,GAAIiC,aACFnB,IAAKP,EAAgBO,IACrBC,IAAKR,EAAAA,QACLqB,QAAS,6CAA+CrB,EAAgBsB,KAAO,gDAC/EK,cAAe,MACfC,gBAAiB,SACjBC,MAAO,kBAIPpC,IAAKA,EACLC,SAAUA,EACVM,gBAAiBA,GAIrB,IAAI8B,GAAa,SAAUZ,GACzB,OAASA,EAAKX,IAAKW,EAAAA,UAGjBL,EAAuB,SAAUxC,GAEnC,IAAK,GADD0D,MACKP,EAAI,EAAGA,EAAInD,EAAMuB,SAAU4B,EAClCO,EAAWC,KAAKF,EAAWzD,EAAMmD,IAGnC,OAAOO,IAGL9B,EAAa,WAEf,GAAIgC,GAAY,8HAGZC,EAAQC,SAASC,cAAc,QACnCF,GAAMG,UAAYJ,EAClBE,SAASG,KAAKC,YAAYL,IAGxBvC,EAAU,SAAU6C,EAAMC,GAE5B,GAAIC,GAAWD,CAGf,KAAK,GAAIE,KAAOH,GACVA,EAAKI,eAAeD,IACJE,SAAdL,EAAKG,KACPD,EAASC,GAAOH,EAAKG,GAK3B,OAAOD,GAKc,oBAAZI,UACa,mBAAXC,SAA0BA,OAAOD,UAC1CA,QAAUC,OAAOD,QAAU3E,GAE7B2E,QAAQE,UAAY7E,GAEpB8E,KAAKD,UAAY7E,EAIG,kBAAX+E,SAAyBA,OAAOC,KACzCD,OAAO,eAAiB,WACtB,MAAO/E,OAIXiF,KAAKH","file":"travelmap.js","sourcesContent":["//! travelmap.js\r\n//! version : 0.01.0\r\n//! authors : Shawn Wildermuth\r\n//! license : MIT\r\n\r\n// Build support for AMD or simple global (borrowed pattern from moment.js)\r\n(function () {\r\n\r\n  \"use strict\";\r\n\r\n  // travelMap object\r\n  var _travelMap = {};\r\n\r\n  var _defaultOptions = {\r\n    stops: [],        // Array of the stops to show (required)\r\n    currentStop: 0,   // Ordinal Position of current location\r\n    selector: \"#map\", // CSS Selector for container for the map\r\n    icon: {           // Icon details\r\n      url: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAIAAABvrngfAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAA1JREFUGFdjoDNgYAAAAHIAAejt7scAAAAASUVORK5CYII=\",\r\n      width: 3,\r\n      height: 3,\r\n    },\r\n    initialZoom: 4,   // Initial Level of Zoom for the Google Map\r\n    pastStroke: {     // Settings for the lines before the currentStop\r\n      color: '#190300', \r\n      opacity: 0.5,\r\n      weight: 2\r\n    },\r\n    futureStroke: {   // Settings for hte lines after the currentStop\r\n      color: '#D30000',\r\n      opacity: 0.6,\r\n      weight: 2\r\n    },\r\n    mapOptions: {     // Options for map (See GMaps for full list of options)\r\n      draggable: true,\r\n      scrollwheel: false,\r\n      disableDoubleClickZoom: true,\r\n      zoomControl: true\r\n    }\r\n  };\r\n\r\n\r\n  _travelMap.createMap = function (options) {\r\n\r\n    var map;\r\n    var settings = _extend(options, _defaultOptions);\r\n\r\n    if (!settings.stops || settings.stops.length == 0) {\r\n      throw \"You must supply stops when creating a map.\";\r\n    }\r\n\r\n    // calculate past, future and current stops\r\n    var pastLines = settings.stops.slice(0, settings.currentStop + 1);\r\n    var futureLines = settings.stops.slice(settings.currentStop, settings.stops.length);\r\n    var currentLocation = settings.stops[settings.currentStop];\r\n\r\n    _initStyle();\r\n\r\n    // Require GMaps and Google Maps API\r\n    if (!(typeof window.GMaps === 'function' && window.GMaps)) {\r\n      console.log('GMaps (and Google Maps API) is required. Please register the following JavaScript library https://hpneo.github.io/gmaps/documentation.html');\r\n    }\r\n\r\n    map = new GMaps({\r\n      div: settings.selector,\r\n      lat: currentLocation.lat,\r\n      lng: currentLocation.long,\r\n      zoom: settings.initialZoom\r\n    });\r\n\r\n    map.map.setOptions(settings.mapOptions);\r\n\r\n    // Past Lines\r\n    map.drawPolyline({\r\n      path: _toLatLongCollection(pastLines),\r\n      strokeColor: settings.pastStroke.color,\r\n      strokeOpacity: settings.pastStroke.opacity,\r\n      strokeWeight: settings.pastStroke.weight\r\n    });\r\n\r\n    // Future Lines\r\n    map.drawPolyline({\r\n      path: _toLatLongCollection(futureLines),\r\n      strokeColor: settings.futureStroke.color,\r\n      strokeOpacity: settings.futureStroke.opacity,\r\n      strokeWeight: settings.futureStroke.weight\r\n    });\r\n\r\n    for (var i = 0; i < settings.stops.length; ++i) {\r\n      var stop = settings.stops[i];\r\n      if (i != settings.currentStop) {\r\n        map.addMarker({\r\n          lat: stop.lat,\r\n          lng: stop.long,\r\n          icon: settings.icon.url,\r\n          infoWindow: { content: stop.info },\r\n          anchorPoint: { x: settings.icon.width/2, y: settings.icon.height/2 }\r\n        });\r\n      }\r\n    }\r\n\r\n    map.drawOverlay({\r\n      lat: currentLocation.lat,\r\n      lng: currentLocation.long,\r\n      content: '<div class=\"overlay\">Current Location<br/>' + currentLocation.info + '<div class=\"overlay_arrow above\"></div></div>',\r\n      verticalAlign: 'top',\r\n      horizontalAlign: 'center',\r\n      layer: \"overlayImage\"\r\n    });\r\n\r\n    return {\r\n      map: map,\r\n      settings: settings,\r\n      currentLocation: currentLocation\r\n    };\r\n  };\r\n\r\n  var _toLatLong = function (stop) {\r\n    return [ stop.lat, stop.long ];\r\n  };\r\n\r\n  var _toLatLongCollection = function (stops) {\r\n    var collection = [];\r\n    for (var x = 0; x < stops.length; ++x) {\r\n      collection.push(_toLatLong(stops[x]));\r\n    }\r\n    \r\n    return collection;\r\n  };\r\n\r\n  var _initStyle = function () {\r\n\r\n    var stopStyle = \".stopName { background: none repeat scroll 0 0 #222; width: 4px; height: 4px; }\" +\r\n      \".gm-style-iw{ overflow: hidden !important; }\";\r\n\r\n    var style = document.createElement(\"style\");\r\n    style.innerHTML = stopStyle;\r\n    document.head.appendChild(style);\r\n  };\r\n\r\n  var _extend = function (base, defaults) {\r\n\r\n    var extended = defaults;\r\n    \r\n    // Extend options with defaults\r\n    for (var key in base) {\r\n      if (base.hasOwnProperty(key)) {\r\n        if (base[key] !== undefined) {\r\n          extended[key] = base[key];\r\n        }\r\n      }\r\n    }\r\n\r\n    return extended;\r\n\r\n  };\r\n\r\n  // Expose it as a public\r\n  if (typeof exports !== 'undefined') {\r\n    if (typeof module !== 'undefined' && module.exports) {\r\n      exports = module.exports = _travelMap;\r\n    }\r\n    exports.travelMap = _travelMap;\r\n  } else {\r\n    this.travelMap = _travelMap;\r\n  }\r\n\r\n  // AMD registration  \r\n  if (typeof define === 'function' && define.amd) {\r\n    define('travelMap', [], function () {\r\n      return _travelMap;\r\n    });\r\n  }\r\n\r\n}.call(this));"],"sourceRoot":"/source/"}